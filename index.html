<!DOCTYPE html>
<html lang="en">
<head>
Â Â <meta charset="UTF-8">
Â Â <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â Â <title>Upload Diagnostic Tool</title>
Â Â <style>
Â Â Â Â body {
Â Â Â Â Â Â font-family: Arial, sans-serif;
Â Â Â Â Â Â padding: 20px;
Â Â Â Â }
Â Â Â Â #log {
Â Â Â Â Â Â margin-top: 20px;
Â Â Â Â Â Â white-space: pre-line;
Â Â Â Â Â Â background: #f4f4f4;
Â Â Â Â Â Â border: 1px solid #ccc;
Â Â Â Â Â Â padding: 10px;
Â Â Â Â Â Â border-radius: 6px;
Â Â Â Â }
Â Â Â Â input[type="file"] {
Â Â Â Â Â Â margin-bottom: 10px;
Â Â Â Â }
Â Â Â Â button {
Â Â Â Â Â Â padding: 10px 15px;
Â Â Â Â }
Â Â </style>
</head>
<body>
Â Â <h1>ğŸ”¥ Firebase Upload Debug</h1>
Â Â <input type="file" id="fileInput" accept="image/*">
Â Â <button onclick="runUpload()">Upload Now</button>
Â Â <div id="log">Waiting...</div>

Â Â <script type="module">
Â Â Â Â import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js';
Â Â Â Â import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js';
Â Â Â Â import { getFirestore, collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js';
Â Â Â Â import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js';

Â Â Â Â const firebaseConfig = {
Â Â Â Â Â Â apiKey: "AIzaSyBzkTSn1Xec-kGSHPahtCQ-nhmni3qzAIs",
Â Â Â Â Â Â authDomain: "neuraplumb-temp.firebaseapp.com",
Â Â Â Â Â Â projectId: "neuraplumb-temp",
Â Â Â Â Â Â storageBucket: "neuraplumb-temp.appspot.com",
Â Â Â Â Â Â messagingSenderId: "329025414261",
Â Â Â Â Â Â appId: "1:329025414261:web:547b1254f89215b82d443c"
Â Â Â Â };

Â Â Â Â const app = initializeApp(firebaseConfig);
Â Â Â Â const auth = getAuth(app);
Â Â Â Â const db = getFirestore(app);
Â Â Â Â const storage = getStorage(app);

Â Â Â Â const log = (msg) => {
Â Â Â Â Â Â const box = document.getElementById('log');
Â Â Â Â Â Â box.textContent += `\n${msg}`;
Â Â Â Â Â Â console.log(msg);
Â Â Â Â };

Â Â Â Â async function runUpload() {
Â Â Â Â Â Â log("ğŸŸ¡ Upload button clicked");
Â Â Â Â Â Â const file = document.getElementById('fileInput').files[0];
Â Â Â Â Â Â if (!file) {
Â Â Â Â Â Â Â Â log("âŒ No file selected");
Â Â Â Â Â Â Â Â return alert("Select a file first");
Â Â Â Â Â Â }

Â Â Â Â Â Â document.getElementById('log').textContent = "--- Uploading ---";
Â Â Â Â Â Â log(`ğŸ“‚ File selected: ${file.name} (${file.size} bytes)`);

Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â await signInWithEmailAndPassword(auth, "jaymz6435@gmail.com", "Elara572025!");
Â Â Â Â Â Â Â Â log("âœ… Firebase Authenticated");
Â Â Â Â Â Â } catch (err) {
Â Â Â Â Â Â Â Â alert("Auth error");
Â Â Â Â Â Â Â Â return log("âŒ Auth error: " + err.message);
Â Â Â Â Â Â }

Â Â Â Â Â Â const storageRef = ref(storage, `uploads/${file.name}`);
Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â await uploadBytes(storageRef, file);
Â Â Â Â Â Â Â Â log("âœ… File uploaded to Storage");
Â Â Â Â Â Â } catch (err) {
Â Â Â Â Â Â Â Â alert("Upload error");
Â Â Â Â Â Â Â Â return log("âŒ Upload failed: " + err.message);
Â Â Â Â Â Â }

Â Â Â Â Â Â let imageUrl = '';
Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â imageUrl = await getDownloadURL(storageRef);
Â Â Â Â Â Â Â Â log("ğŸ”— getDownloadURL returned:");
Â Â Â Â Â Â Â Â log(imageUrl);
Â Â Â Â Â Â } catch (err) {
Â Â Â Â Â Â Â Â alert("URL error");
Â Â Â Â Â Â Â Â return log("âŒ getDownloadURL failed: " + err.message);
Â Â Â Â Â Â }

Â Â Â Â Â Â try {
Â Â Â Â Â Â Â Â await addDoc(collection(db, "uploads"), {
Â Â Â Â Â Â Â Â Â Â fileName: file.name,
Â Â Â Â Â Â Â Â Â Â imageUrl,
Â Â Â Â Â Â Â Â Â Â timestamp: serverTimestamp()
Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â Â Â log("ğŸ“¦ Firestore document created");
Â Â Â Â Â Â } catch (err) {
Â Â Â Â Â Â Â Â alert("Firestore error");
Â Â Â Â Â Â Â Â return log("âŒ Firestore write failed: " + err.message);
Â Â Â Â Â Â }

Â Â Â Â Â Â log("âœ…âœ…âœ… Upload Flow Complete âœ…âœ…âœ…");
Â Â Â Â Â Â alert("Upload complete");
Â Â Â Â }

Â Â Â Â window.runUpload = runUpload;
Â Â </script>
</body>
</html>
